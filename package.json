{
  "name": "branch-change-tabs",
  "displayName": "Branch Change Tabs",
  "description": "Opens modified/newly-tracked files upon switching git branches.",
  "version": "0.0.4",
  "publisher": "carlxwdev",
  "license": "All rights reserved.",
  "icon": "img/icon.png",
  "repository": {
    "type": "git",
    "url": "https://github.com/carlxw/vscode-branch-change-tabs"
  },
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished",
    "workspaceContains:.git"
  ],
  "extensionDependencies": [
    "vscode.git"
  ],
  "main": "./build/main.js",
  "scripts": {
    "build": "tsc -p .",
    "watch": "tsc -watch -p .",
    "lint": "echo \"No lint configured\"",
    "package": "npx @vscode/vsce package",
    "publish": "npm run build && npm run package && npx @vscode/vsce publish && npx ovsx publish"
  },

  "contributes": {
    "views": {
      "explorer": [
        {
          "id": "branchTabs.changedFiles",
          "name": "Branch Modified/Tracked Files",
          "icon": "img/icon.png"
        }
      ]
    },
    "commands": [
      {
        "command": "branchTabs.openChangedFiles",
        "title": "Branch Change Tabs: Open Changed Files"
      },
      {
        "command": "branchTabs.toggleIgnoreActiveFile",
        "title": "Branch Change Tabs: Toggle Ignore for Active File"
      },
      {
        "command": "branchTabs.closePinnedTabsInGroup",
        "title": "Branch Change Tabs: Close Pinned Tabs in Currently Active Group"
      },
      {
        "command": "branchTabs.changedFiles.openFile",
        "title": "Open file"
      },
      {
        "command": "branchTabs.changedFiles.search",
        "title": "Search Changed Files",
        "shortTitle": "Search",
        "icon": "$(search)"
      },
      {
        "command": "branchTabs.changedFiles.ignoreFile",
        "title": "Ignore file for this extension"
      },
      {
        "command": "branchTabs.changedFiles.unignoreFile",
        "title": "Un-ignore file for this extension"
      },
      {
        "command": "branchTabs.changedFiles.showDiffMain",
        "title": "See diff (relative to the base branch)"
      }
    ],
    "menus": {
      "commandPalette": [
        {
          "command": "branchTabs.changedFiles.openFile",
          "when": "false"
        },
        {
          "command": "branchTabs.changedFiles.ignoreFile",
          "when": "false"
        },
        {
          "command": "branchTabs.changedFiles.unignoreFile",
          "when": "false"
        },
        {
          "command": "branchTabs.changedFiles.showDiffMain",
          "when": "false"
        }
      ],
      "view/item/context": [
        {
          "command": "branchTabs.changedFiles.openFile",
          "when": "view == branchTabs.changedFiles && (viewItem == branchTabs.changedFile || viewItem == branchTabs.changedFileIgnored)",
          "group": "inline@1"
        },
        {
          "command": "branchTabs.changedFiles.ignoreFile",
          "when": "view == branchTabs.changedFiles && viewItem == branchTabs.changedFile",
          "group": "navigation@2"
        },
        {
          "command": "branchTabs.changedFiles.unignoreFile",
          "when": "view == branchTabs.changedFiles && viewItem == branchTabs.changedFileIgnored",
          "group": "navigation@2"
        },
        {
          "command": "branchTabs.changedFiles.showDiffMain",
          "when": "view == branchTabs.changedFiles && (viewItem == branchTabs.changedFile || viewItem == branchTabs.changedFileIgnored)",
          "group": "navigation@3"
        }
      ],
      "view/title": [
        {
          "command": "branchTabs.changedFiles.search",
          "when": "view == branchTabs.changedFiles",
          "group": "navigation@1"
        }
      ]
    },
    "keybindings": [
      {
        "command": "branchTabs.changedFiles.search",
        "key": "ctrl+f",
        "mac": "cmd+f",
        "when": "view == branchTabs.changedFiles && listFocus"
      },
      {
        "command": "branchTabs.changedFiles.search",
        "key": "meta+f",
        "when": "view == branchTabs.changedFiles && listFocus && isLinux"
      }
    ],
    "configuration": {
      "title": "Branch Change Tabs",
      "properties": {
        "branchTabs.excludedBranches": {
          "type": "array",
          "default": [],
          "description": "Checking out to these branches will not trigger this extension.",
          "items": {
            "type": "string"
          }
        },
        "branchTabs.closeAllBeforeOpen": {
          "type": "boolean",
          "default": true,
          "description": "Close all open editors before opening changed files."
        },
        "branchTabs.includeModifiedFiles": {
          "type": "boolean",
          "default": true,
          "description": "Open files that are modified relative to the base branch."
        },
        "branchTabs.includeNewlyTrackedFiles": {
          "type": "boolean",
          "default": true,
          "description": "Open files that are newly tracked relative to the base branch."
        },
        "branchTabs.pinModifiedFiles": {
          "type": "boolean",
          "default": true,
          "description": "Pin modified files when opening. Otherwise, just open the files."
        },
        "branchTabs.pinNewlyTrackedFiles": {
          "type": "boolean",
          "default": true,
          "description": "Pin newly added files when opening. Otherwise, just open the files."
        },
        "branchTabs.excludedFiles": {
          "type": "array",
          "default": [
            "\\.png$",
            "\\.jpe?g$",
            "\\.svg$",
            "\\.gif$",
            "\\.pdf$",
            "\\.zip$",
            "\\.tar$",
            "\\.gz$",
            "\\.7z$",
            "\\.exe$",
            "\\.dmg$",
            "\\.iso$",
            "\\.jar$",
            "^\\.gitignore$",
            "^\\.gitattributes$"
          ],
          "description": "List of regex strings (i.e., file name, file extension) to be ignored by this extension. Files ignored by .gitignore are already excluded.",
          "items": {
            "type": "string"
          }
        },
        "branchTabs.maxFilesToOpen": {
          "type": "number",
          "default": 10,
          "description": "This extension will open this many files upon a branch change."
        },
        "branchTabs.textFilesOnly": {
          "type": "boolean",
          "default": true,
          "description": "Only open text files (skip binary/image files)."
        },
        "branchTabs.excludedDirectories": {
          "type": "array",
          "default": [
            "^dist/",
            "^build/",
            "^out/",
            "^coverage/",
            "^node_modules/",
            "^\\.turbo/",
            "^\\.next/"
          ],
          "description": "List of regex strings (directory URIs) to be ignored by this extension.",
          "items": {
            "type": "string"
          }
        },
        "branchTabs.closePinnedTabsOnBranchChange": {
          "type": "boolean",
          "default": false,
          "description": "Close pinned tabs that were opened by this extension when switching branches."
        },
        "branchTabs.closeAllOnExcludedBranch": {
          "type": "boolean",
          "default": true,
          "description": "Close tabs that were opened by the extension when switching to an ignored branch."
        },
        "branchTabs.promptOnNewRepository": {
          "type": "boolean",
          "default": true,
          "description": "Prompt to enable or disable the extension when a new repository is opened."
        },
        "branchTabs.disabledRepositories": {
          "type": "array",
          "default": [],
          "description": "List of repository root paths where the extension is disabled.",
          "items": {
            "type": "string"
          }
        },
        "branchTabs.baseBranch": {
          "type": "string",
          "default": "",
          "description": "Optional base branch/ref to diff against. If empty, uses upstream when available, otherwise main/master."
        }
      }
    }
  },

  "devDependencies": {
    "@types/node": "^20.11.30",
    "@types/vscode": "^1.85.0",
    "typescript": "^5.3.3"
  }
}
